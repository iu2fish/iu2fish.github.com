<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.2.0
    Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    <title>蒹葭从风</title>
    <meta name="description" content="📖📖📖">
    <link rel="canonical" href="http://localhost:4000/">
  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  <link rel="stylesheet" href="/assets/css/skins/default.css">
  <link rel="alternate" type="application/atom+xml" title="蒹葭从风" href="/feed.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--home  ">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

    <header class="masthead">
  <div class="wrap">
    
    
    
      
        <h1 class="site-title animated fadeIn"><a href="/">蒹葭从风</a></h1>
      
      <p class="site-description animated fadeIn" itemprop="description">📖📖📖</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article>
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title"></h1>
        
      </header>
      <div class="page-content">
        


<div class="entries-list">

<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2020/12/31/new-year.html" rel="bookmark">2020年终复盘
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <p>又到了写年终总结的时候了，刚毕业那几年每年都会写，断了几年，今年发生的事情太多了，还是记录一下吧。</p>
<h2 id="疫情">疫情</h2>
<p>年初，疫情大规模爆发，在家看新闻，大年三十晚上是最撕裂的一天吧，电视里歌舞升平，现实呢，后来武汉解封问了从武汉回来的同事，我说，春节期间网上流传的视频是真的么？他说是真的，真相远比网上流传的视频要震撼的多的多。怕封路，在家也没呆几天就匆匆的返回上海。一路上见了很多奇奇怪怪的事，比如乡下用土堆封路，比如租售待遇不一样，同一个小区，都是从外地返回，业主可以直接进去，租赁的租户就不可以进去，奇奇怪怪的事太多了。觉得自己被冒犯，可是哪有如何呢，很多人都说自己见证了历史，可是历史不是每天都是么。</p>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2020-12-31T15:13:29+08:00">December 31, 2020
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2020/12/31/A-Few-Friendly-Tips-For-Your-JavaScript.html" rel="bookmark">A few firendy tips for your javascript
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <p>JavaScript is a very loose programming language. By saying that I mean it’s so easy to write heaps of crap that still works, however it will be hard to maintain and to extend. In this post I’d love to present some quick and friendly tips for JavaScript beginners and it might be able to help you. Now relax and let’s get started.<!--more--></p>
<h3 id="know-your-target">Know your target</h3>
<p>Before you start writing any code, please spend a few minutes to figure out a simple question: which browsers will you write for?. Knowing your target (browser) can make a big difference because we all know the moderner the browser is, the more power you gain.</p>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2020-12-31T15:13:29+08:00">December 31, 2020
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2018/07/30/%E6%89%AB%E7%A0%81%E7%99%BB%E5%BD%95%E4%BA%86%E8%A7%A3%E5%A4%9A%E5%B0%91.html" rel="bookmark">扫码登录了解多少
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <p>周末，想写一个即刻app的微信小程序，通过web端的页面，抓取了一些接口API，但是都需要auth。然后看下，auth从哪获取的，然后发现是扫码之后，通过接口拿到的。
然后分析了一下，也算知道了，扫码登录的一些实现方式。</p>
<h4 id="step-1">step 1</h4>
<p>通过一个接口获取唯一的<code class="language-plaintext highlighter-rouge">UUID</code>，同时这个<code class="language-plaintext highlighter-rouge">UUID</code>也是有过期时间的。即刻好像是2分钟。</p>
<h4 id="step-2">step 2</h4>
<p>拿到这个<code class="language-plaintext highlighter-rouge">UUID</code>，再加上一些参数，生成一个二维码。在页面上展示。同时调用验证接口，传入生成的UUID。</p>
<h4 id="step-3">step 3</h4>
<p>拿出手机，用已经登录之后的app扫第二步生成的二维码。在手机上点确认。如果点了确认，第二步的验证接口会返回true。这时候，再调用另外一个confirm接口。</p>
<h4 id="step-4">step 4</h4>
<p>调用confirm接口，这时候，返回的数据就有<code class="language-plaintext highlighter-rouge">auth</code>的值了，这时候把auth的值保存在<code class="language-plaintext highlighter-rouge">localstorage</code>里，就可以做成登录态了。
这个就是简单的，扫码登录的原理。
<!--more--></p>
<h4 id="挖个坑">挖个坑</h4>
<p>不过原理很简单，但是实现起来，却不简单。具体的实现，可能会有一些意向不到的问题。虽然，调用即刻的扫码登录，已经成功，但是具体接口API内部怎么实现的，我还不知道，先挖个坑，以后有时间，自己写一个吧。</p>

      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2018-07-30T07:39:12+08:00">July 30, 2018
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2018/07/25/NPM-Version-%E5%AF%BC%E8%87%B4%E7%9A%84%E4%B8%80%E4%B8%AABug.html" rel="bookmark">NPM Version 导致的一个Bug
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <h3 id="起因">起因</h3>
<p>事情是这样的，一大早，测试小哥哥就说，新版的RN项目，怎么发布失败呀，你来解决一下。我打开打包日志，发现有一条错误的日志log。
<code class="language-plaintext highlighter-rouge">未找到项目依赖的React-Native</code>
然后我就慢慢的debug，看看发现是哪里有依赖写的不对，导致的。debug了一上午。删掉本地的<code class="language-plaintext highlighter-rouge">node_module</code> 重新npm install 之后，发现有一个依赖包，始终安装不了。
提示的报错文案
<code class="language-plaintext highlighter-rouge">npm ERR! Invalid version: "2.10"</code></p>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2018-07-25T07:27:47+08:00">July 25, 2018
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2017/06/05/redux-%E4%B9%8B-middleware.html" rel="bookmark">redux 之 middleware
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <p>在回调中分发一个 action ，reducer 收到 action 后，更新 state 并通知 view 重新渲染。单向数据流，看着没什么问题，但是，如果需要打印每一个 action 信息来调试，就得去改 dispatch 或者 reducer 实现，使其具有打印日志的功能。又比如，点击 button 后，需要先去服务端请求数据，只有等数据返回后，才能重新渲染 view ，此时我们希望 dispatch 或者 reducer 拥有异步请求的功能。再比如，需要异步请求数据返回后，打印一条日志，再请求数据，再打印日志，再渲染。
<!-- more -->
面对多样的业务场景，单纯的修改 dispatch 或者 reducer 的代码显然不具有普适性么，我们需要的是可以组合的，自由拔插的插件机制，这一点 redux 借鉴了koa里的 middleware 的思想，另外 redux 中的 reducer 更关心的是数据的转化逻辑，所以 middleware 就是为了增强 dispatch 而出现的。
展示了应用middleware 后 redux 处理事件的逻辑，每一个 middleware 处理一个相对独立的业务需求，通过串联不同的middleware 实现变化多样的功能。</p>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2017-06-05T06:58:00+08:00">June 5, 2017
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2017/05/07/%E5%88%9D%E8%AF%86redux.html" rel="bookmark">初识redux
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <blockquote>
  <p>简书 <a href="http://www.jianshu.com/u/1578eaace5b4">i蒹葭从风</a>
转载请注明原创出处，谢谢！
如果读完觉得有收获的话，欢迎点赞加关注</p>
</blockquote>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2017-05-07T00:10:06+08:00">May 7, 2017
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2016/10/27/we-chat-app-pages-1.html" rel="bookmark">微信小程序系列「一」
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <p>2016年9月21日，在前端届的确是一个值得纪念的日子。这天，微信放出杀手锏，WeChatApp 又称微信小程序。但是就目前来看，有诸多不便，但是这个事情，依然有很大的意义。因为这是一个生态。从放出来这个消息，就开始关注。加上公司也有内测资格，所以准备写一些文章来聊聊weChatApp开发的一些情况，以及踩到的坑。
<!--more-->
首先提到的便是1M的大小限制🚫，其实这个看到1M的大小，觉得没什么，但是作为一个大的公司，那么多业务，总共就1M，那么就比较可怜了。算起来我们BU获得的大小容量就100Kb，100Kb是什么概念，纯代码大概只有3000行左右的代码。但是我们之前的代码压缩之后也有235kb呢。反正容量是一个限制。
其次：很多官方推荐的API也是不能用的。比如ES6，虽然后来开发工具支持了ES6，但是一些android 机是不支持ES6的，也是呵呵哒。还有官方推荐flex布局，但是在iOS 8及其以下是不支持flex布局的，那怎么办呢？官方给的解释是，自己去做兼容。
官方很容易改变API，很多官方组件还没上线呢，就已经废弃了。比如一下的截图：
<img src="https://raw.githubusercontent.com/iu2fish/_posts/master/media/14779317322951.jpg" alt="" />
这个就比较尴尬了。很多在内测的公司，估计第一版就是按着官方的组件来的，结果还没上架，你就把官方的组件给废弃了，这是拿内测公司当小白鼠呢。但是，就算是当小白鼠，很多公司还是跪舔着争当小白鼠。
下面来说说开发中遇到的坑</p>
<h5 id="setdata-以数据来驱动view">setData 以数据来驱动view</h5>
<p>在第一版的API中，setData是可以在onLoad的时候，设置数据的，但是更新一次api之后，在onload就不能设置setData了，但是官方的文档，并没有提到这个。还有在setData的时候，如果数据，有多层级。当数据有改变的时候，必须从外层开始设置，例如</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>obj:{
    innerObj:{}
}
</code></pre></div></div>
<p>如果在setData的时候写法这样的话，是无效的。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>this.setData({
	innerObj:innerObj
})
</code></pre></div></div>
<p>这样是无效的。
还有在上面提到，在onload 的时候设置setData无效，那怎么办呢，就像我们的项目，必须设置的话，只能采取官方不推荐或者说，比较猥琐的解决方案。</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>this.data.obj = obj;
</code></pre></div></div>
<p>虽然官方不推荐，但是也没办法不是吗
setData在内部的一个队列方案，这个以后会详细的说，这一篇主要是说说小程序有哪些坑。现在有解决方案的，就把解决方案说一下，没有的话，就是吐槽吧。</p>
<h4 id="数据存储">数据存储</h4>
<p>每个微信小程序都可以有自己的本地缓存，可以通过 wx.setStorage（wx.setStorageSync）、wx.getStorage（wx.getStorageSync）、wx.clearStorage（wx.clearStorageSync）可以对本地缓存进行设置、获取和清理。本地缓存最大为10MB。
在第一版的api中，删除storage是不能指定key进行删除的。那么怎么删除指定的storage呢，只有把当前的key的value值设置为空了。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">wx</span><span class="p">.</span><span class="nx">setStorage</span><span class="p">({</span>
  <span class="na">key</span><span class="p">:</span><span class="dl">"</span><span class="s2">key</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">data</span><span class="p">:</span><span class="dl">""</span>
<span class="p">})</span>
</code></pre></div></div>
<p>这个确实也够猥琐的，不过后来的更新中，微信提供了，指定key的删除方法。</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">wx</span><span class="p">.</span><span class="nx">removeStorage</span><span class="p">(</span><span class="nx">OBJECT</span><span class="p">)</span>
</code></pre></div></div>
<p><img src="https://raw.githubusercontent.com/iu2fish/_posts/master/media/14780057339213.jpg" alt="" /></p>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2016-10-27T08:48:45+08:00">October 27, 2016
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2016/09/27/eslint-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8.html" rel="bookmark">eslint 在项目中的使用
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <p>前段一段时间，组里搞了jslint，但是，jslint好像没有eslint的配置灵活一些，并且webstrom 也支持eslint，所以就自己搞了一套eslint的检测配置，虽然提交了代码，但是并不强制要求使用。</p>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2016-09-27T09:04:33+08:00">September 27, 2016
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2016/08/22/%E5%9B%A2%E9%98%9FJavaScript%E7%9A%84%E4%B8%80%E4%BA%9B%E8%A7%84%E8%8C%83.html" rel="bookmark">团队JavaScript的一些规范
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <h3 id="命名规范">命名规范</h3>
<h4 id="全名总体规范">全名总体规范</h4>
<ol>
  <li>尽量以英文名命名，避免出现拼写错误</li>
</ol>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2016-08-22T06:31:29+08:00">August 22, 2016
  </time>
    </footer>
  
</article>


<article class="entry h-entry">
  <header class="entry-header">
    <h3 class="entry-title p-name">
      
        <a href="/2016/07/12/talk-about-sesionStorage-VS-localStorage.html" rel="bookmark">talk about sesionStorage VS localStorage
</a>
      
    </h3>
    
  </header>
  
    <div class="entry-excerpt p-summary">
      
        <p>最近业务上，有个需求，当一次回话结束，保存的信息，就要销毁。这个一看，正好是sessionStorage的用法，但是之前并没有了解锅sessionStorage，一直是使用localStorage，并且公司的框架封装好了localStorage的用法，所以，趁此机会了解一下sessionStorage的一些API。<!--more-->
说起localStorage和sessionStorage，总要说起我们的小甜饼，Cookie。顾名思义，cookie确实非常小，它的大小只有4K左右，是网景公司的前雇员Lou Montulli在1993年3月的发明。它主要用途是用来存放保存登录信息，比如你登录某个网站是可以看到『记住密码』，这通常就是通过在Cookie中存入一段辨别用户的数据来实现的。</p>


      
    </div>
  
  
    <footer class="entry-meta">
      
      <time class="entry-date dt-published" datetime="2016-07-12T07:35:53+08:00">July 12, 2016
  </time>
    </footer>
  
</article>
</div>


        
      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="copyright">
    
      <p>&copy; 2020 蒹葭从风. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


  </body>

</html>
